{% extends "base.html" %}

{% block title %}Edit Payment - RentalHub{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto fade-in">
    <a href="{{ url_for('payments.list_payments') }}" class="text-indigo-600 hover:text-indigo-700 mb-4 inline-block">
        <i class="fas fa-arrow-left mr-2"></i>Back to Payments
    </a>
    <h1 class="text-3xl font-bold text-gray-800 mb-8">
        <i class="fas fa-edit text-indigo-600 mr-3"></i>Edit Payment
    </h1>
    
    <div class="bg-white rounded-xl shadow-md p-8">
        <form method="POST">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">
                        Lease <span class="text-red-500">*</span>
                    </label>
                    <select name="lease_id" required class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500">
                        <option value="">Select Lease</option>
                        {% for lease in leases %}
                            <option value="{{ lease.id }}" {% if payment.lease_id == lease.id %}selected{% endif %}>
                                {{ lease.property.address }} - {{ lease.tenant.user.username }}
                            </option>
                        {% endfor %}
                    </select>
                </div>
                
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">
                        Amount ($) <span class="text-red-500">*</span>
                    </label>
                    <input type="number" name="amount" required min="0" step="0.01" 
                           value="{{ payment.amount }}"
                           class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">
                        Due Date
                    </label>
                    <input type="date" name="due_date" 
                           value="{{ payment.due_date.strftime('%Y-%m-%d') if payment.due_date else '' }}"
                           class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">
                        Paid Date
                    </label>
                    <input type="date" name="paid_date" 
                           value="{{ payment.paid_date.strftime('%Y-%m-%d') if payment.paid_date else '' }}"
                           class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">
                        Payment Method
                    </label>
                    <select name="payment_method" class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500">
                        <option value="cash" {{ 'selected' if payment.payment_method == 'cash' else '' }}>Cash</option>
                        <option value="bank_transfer" {{ 'selected' if payment.payment_method == 'bank_transfer' else '' }}>Bank Transfer</option>
                        <option value="check" {{ 'selected' if payment.payment_method == 'check' else '' }}>Check</option>
                        <option value="online" {{ 'selected' if payment.payment_method == 'online' else '' }}>Online Payment</option>
                    </select><option value="cash" {% if payment.payment_method == 'cash' %}selected{% endif %}>Cash</option>
                        <option value="bank_transfer" {% if payment.payment_method == 'bank_transfer' %}selected{% endif %}>Bank Transfer</option>
                        <option value="check" {% if payment.payment_method == 'check' %}selected{% endif %}>Check</option>
                        <option value="online" {% if payment.payment_method == 'online' %}selected{% endif %}>Online Payment</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">
                        Status
                    </label>
                    <select name="status" class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500">
                        <option value="pending" {% if payment.status == 'pending' %}selected{% endif %}>Pending</option>
                        <option value="paid" {% if payment.status == 'paid' %}selected{% endif %}>Paid</option>
                        <option value="overdue" {% if payment.status == 'overdue' %}selected{% endif %}>Overdue</option>
                    </select>
                </div>
            </div>
            
            <div class="flex space-x-4">
                <button type="submit" class="flex-1 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition font-semibold">
                    <i class="fas fa-save mr-2"></i>Update Payment
                </button>
                <a href="{{ url_for('payments.list_payments') }}" 
                   class="flex-1 bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition font-semibold text-center">
                    <i class="fas fa-times mr-2"></i>Cancel
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}